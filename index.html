<!DOCTYPE html>
<div id="container"></div>
<script type="module">
    import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

    // Chart dimensions and margins
    const width = 640;
    const height = 400;

    // Create the SVG container
    const svg = d3.create("svg")
        .attr("width", width)
        .attr("height", height);

    // Add Polygons
    svg.append("polygon")
        .attr("points", "220,180 300,300 170,340 123,314")
        .attr("fill", "green")
        .attr("stroke", "green");

    // Add Lines
    const line = svg.append("line")
        .attr("x1", 30)
        .attr("y1", 240)
        .attr("x2", 400)
        .attr("y2", 125)
        .attr("stroke", "black");

    // Rectangle
    const rectangle = svg.append("rect")
        .attr("transform", "rotate(343, 310, 207)")
        .attr("x", 350)
        .attr("y", 95)
        .attr("width", 60)
        .attr("height", 60)
        .attr("fill", "blue");

    // Circles
    const circle = svg.append("circle")
        .attr("cx", 40)
        .attr("cy", 210)
        .attr("r", 25)
        .attr("fill", "red");

    // Variable to track rectangle rotation state
    let isRotated = false;

    // Seesaw Animation Function
    function toggleSeesaw() {
        // New positions for circle and rectangle
        let newCircleY = circle.attr("cy") == 210 ? 100 : 210;
        let newRectY = rectangle.attr("y") == 95 ? 153 : 95;
        let newDegree = isRotated ? "rotate(343, 310, 207)" : "rotate(17, 310, 207)";

        // Toggle rotation state
        isRotated = !isRotated;

        // New position for line
        let newLineY1 = line.attr("y1") == 240 ? 125 : 240;
        let newLineY2 = line.attr("y2") == 125 ? 240 : 125;

        // Animate Circle
        circle.transition()
            .duration(500)
            .attr("cy", newCircleY);

        // Animate Rectangle
        rectangle.transition()
            .duration(500)
            .attr("y", newRectY)
            .attr("transform", newDegree);

        // Animate Line
        line.transition()
            .duration(500)
            .attr("y1", newLineY1)
            .attr("y2", newLineY2);
    }

    // Add Click Event Listeners
    circle.on("click", toggleSeesaw);
    rectangle.on("click", toggleSeesaw);

    // Append the SVG element to the container
    document.getElementById("container").appendChild(svg.node());
</script>
