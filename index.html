<!DOCTYPE html>
<div id="container"></div>
<h1>Friends Trip</h1>
<p>Welcome aboard! We're embarking on a journey together, and it's a perfect opportunity for passengers to connect. Your mission is to facilitate introductions among fellow travelers by arranging them into different sections. Simply drag and drop the passengers to create an environment where everyone can easily meet and mingle. Let the journey be not just a destination but a shared experience. Have a great trip!</p>
<style>
  .engine-exhaust {
    animation: moveEngineExhaust 2s linear infinite; /* CSS animation for engine exhaust */
  }

  .moving-line {
    animation: moveCloud 2s linear infinite; 
  }

  @keyframes moveEngineExhaust {
    from {
      transform: translate(0, 0);
    }
    to {
      transform: translate(700px, -300px); /* Adjust the values for engine exhaust movement */
    }
  }

  @keyframes moveCloud {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(700px); /* Adjust the values for cloud movement */
    }
  }
</style>


<script type="module">

import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

// Declare the chart dimensions and margins.
const width = 700;
const height = 400;

console.log(d3); // test if d3 is loaded

// Create the SVG container.!
const svg = d3.create("svg")
    .attr("width", width)
    .attr("height", height);

// Draw background

// Draw 1st mountain
  const mountain1 = svg.append("polygon")
    .attr("points", `0,${height} ${width / 4},20 ${width / 2}, ${height}`)
    .attr("fill", "gray")
  //  .attr("class", "moving-line")


// Draw cloud (circles)
  const cloudRadius = 20; 
  const cloudYPosition = 50; 

  // Create multiple circles to form the cloud
  // Draw 1st clouds on the 1st mountain
  for (let i = 0; i < 3; i++) {
    svg.append("circle")
        .attr("cx", width / 4 -25  + i * 30) // Adjust the spacing between circles
        .attr("cy", cloudYPosition)
        .attr("r", cloudRadius)
        .attr("fill", "white")
        .attr("stroke","black")
}

  // Draw 2nd mountain
  const mountain2 = svg.append("polygon")
    .attr("points", `${width / 2},${height} ${3 * width / 4},80 ${width}, ${height}`)
    .attr("fill", "gray");

   // Draw 2nd clouds

  for (let i = 0; i < 3; i++) {
      svg.append("circle")
          .attr("cx", (width/2-500) + i * 30) 
          .attr("cy", cloudYPosition+30)
          .attr("r", cloudRadius)
          .attr("fill", "white")
          .attr("stroke","black")
          .attr("class", "moving-line")
  }
  // Draw 2nd clouds
  for (let i = 0; i < 3; i++) {
      svg.append("circle")
          .attr("cx", (width/2-300) + i * 30) 
          .attr("cy", cloudYPosition+30)
          .attr("r", cloudRadius)
          .attr("fill", "white")
          .attr("class", "cloud")
          .attr("stroke","black")
          .attr("class", "moving-line")
  }

   // Draw 3rd clouds
   for (let i = 0; i < 3; i++) {
      svg.append("circle")
          .attr("cx", (width/2-100) + i * 30) 
          .attr("cy", cloudYPosition+30)
          .attr("r", cloudRadius)
          .attr("fill", "white")
          .attr("class", "cloud")
          .attr("stroke","black")
          .attr("class", "moving-line")
  }

  // Draw 4th clouds
  for (let i = 0; i < 3; i++) {
      svg.append("circle")
          .attr("cx", (width/2+100) + i * 30) 
          .attr("cy", cloudYPosition+30)
          .attr("r", cloudRadius)
          .attr("fill", "white")
          .attr("class", "cloud")
          .attr("stroke","black")
          .attr("class", "moving-line")
  }
  // Draw 5th clouds
  for (let i = 0; i < 3; i++) {
      svg.append("circle")
          .attr("cx", (width/2-700) + i * 30) 
          .attr("cy", cloudYPosition+30)
          .attr("r", cloudRadius)
          .attr("fill", "white")
          .attr("class", "cloud")
          .attr("stroke","black")
          .attr("class", "moving-line")
  }
// Draw path (Lines)   
 
 svg.append("line")
    .attr("x1", -1000)
    .attr("y1", 385)
    .attr("x2", 1000)
    .attr("y2", 385)
    .attr("stroke", "black")
    .attr("class", "moving-line")
    .attr("stroke-dasharray", "100 100") 
    .attr("stroke-dashoffset", 10000)      
    .transition()
    .duration(1000)  
    .ease(d3.easeLinear)
    .attr("stroke-dashoffset", 0);


// Draw connectors (Lines)
  svg.append("line")
    .attr("x1", 220)
    .attr("y1", 320)
    .attr("x2", 550)
    .attr("y2", 320)
    .attr("stroke", "black")

  svg.append("line")
    .attr("x1", 220)
    .attr("y1", 330)
    .attr("x2", 550)
    .attr("y2", 330)
    .attr("stroke", "black")

   // Draw main body of the train (rectangle)
  svg.append("rect")
      .attr("x", 20)
      .attr("y", 140)
      .attr("width", 200)
      .attr("height", 210)
      .attr("fill", "red")

   svg.append("rect")
      .attr("x", 230)
      .attr("y", 140)
      .attr("width", 210)
      .attr("height", 210)
      .attr("fill", "red")

   svg.append("rect")
      .attr("x", 450)
      .attr("y", 140)
      .attr("width", 210)
      .attr("height", 210)
      .attr("fill", "red")

    svg.append("rect")
    .attr("x", 20)
    .attr("y", 140)
    .attr("width",  60)
    .attr("height", 80)
    .attr("fill", "white")

   // draw windows of the train
   svg.append("rect")
   .attr("x", 100)
   .attr("y", 150)
   .attr("width",  80)
   .attr("height", 70)
   .attr("fill", "white")

  svg.append("rect")
   .attr("x", 250)
   .attr("y", 150)
   .attr("width",  80)
   .attr("height", 70)
   .attr("fill", "white")

   svg.append("rect")
   .attr("x", 350)
   .attr("y", 150)
   .attr("width",  80)
   .attr("height", 70)
   .attr("fill", "white")

   svg.append("rect")
   .attr("x", 470)
   .attr("y", 150)
   .attr("width",  80)
   .attr("height", 70)
   .attr("fill", "white")

   svg.append("rect")
   .attr("x", 570)
   .attr("y", 150)
   .attr("width",  80)
   .attr("height", 70)
   .attr("fill", "white")

   // Draw tires (circles)
  svg.append("circle")
    .attr("cx", 80)
    .attr("cy", 350)
    .attr("r", 35)
    .attr("fill", "green")

    svg.append("circle")
    .attr("cx", 80)
    .attr("cy", 350)
    .attr("r", 25)
    .attr("fill", "black")

  svg.append("circle")
    .attr("cx", 160)
    .attr("cy", 350)
    .attr("r", 35)
    .attr("fill", "green")
    
    svg.append("circle")
    .attr("cx", 160)
    .attr("cy", 350)
    .attr("r", 25)
    .attr("fill", "black")

   svg.append("circle")
   .attr("cx", 300)
   .attr("cy", 350)
   .attr("r", 35)
   .attr("fill", "green")

   svg.append("circle")
   .attr("cx", 300)
   .attr("cy", 350)
   .attr("r", 25)
   .attr("fill", "black")
   
   svg.append("circle")
   .attr("cx", 380)
   .attr("cy", 350)
   .attr("r", 35)
   .attr("fill", "green")
   
   svg.append("circle")
   .attr("cx", 380)
   .attr("cy", 350)
   .attr("r", 25)
   .attr("fill", "black")

   svg.append("circle")
    .attr("cx", 500)
    .attr("cy", 350)
    .attr("r", 35)
    .attr("fill", "green")
    
    svg.append("circle")
    .attr("cx", 500)
    .attr("cy", 350)
    .attr("r", 25)
    .attr("fill", "black")

   svg.append("circle")
    .attr("cx", 580)
    .attr("cy", 350)
    .attr("r", 35)
    .attr("fill", "green")
  

    svg.append("circle")
    .attr("cx", 580)
    .attr("cy", 350)
    .attr("r", 25)
    .attr("fill", "black")

  // Draw the begining part of the train - polygon
   svg.append("polygon")
    .attr("points", "20,350 0,350 20,220")
    .attr("fill", "gray");

   svg.append("rect")
    .attr("x", 20)
    .attr("y", 200)
    .attr("width",  10)
    .attr("height", 20)
    .attr("fill", "red")

   svg.append("rect")
    .attr("x", 15)
    .attr("y", 190)
    .attr("width",  20)
    .attr("height", 10)
    .attr("fill", "red")

  // Draw conductor
  // Draw the cat's head (rectangle)
/*.on('click',function(){
  d3.select(this)
      .transition()
      .duration(1000)
      .attr("fill", "red");
    });*/
  svg.append("rect")
    .attr("x", 110)
    .attr("y", 160)
    .attr("width", 60)
    .attr("height", 50)
    .attr("rx", 10)
    .attr("ry", 10)
    .attr("fill", "orange");

  // Draw the cat's ears (polygons)
  svg.append("polygon")
    .attr("points", "110,170 110,150 132,161")
    .attr("fill", "orange");

  svg.append("polygon")
    .attr("points", "135,170 170,150 170,165")
    .attr("fill", "orange");
    

  // Draw the cat's eyes (circles)
  svg.append("circle")
    .attr("cx", 130)
    .attr("cy", 175)
    .attr("r", 5)
    .attr("fill", "white");

  svg.append("circle")
    .attr("cx", 150)
    .attr("cy", 175)
    .attr("r", 5)
    .attr("fill", "white");

   // Draw ovals to the eyes (eclipse)
  svg.append("ellipse")
    .attr("cx", 130)
    .attr("cy", 175)
    .attr("rx", 2)
    .attr("ry", 3)
    .attr("fill", "green");

  svg.append("ellipse")
    .attr("cx", 150)
    .attr("cy", 175)
    .attr("rx", 2)
    .attr("ry", 3)
    .attr("fill", "green");


  // Draw the cat's nose (triangle)
  svg.append("polygon")
    .attr("points", "140,192 135,182 145,182")
    .attr("fill", "pink");

  // Draw the cat's mouth (path)
  svg.append("path")
    .attr("d", "M130,195 Q140,200 150,195")
    .attr("fill", "black");

  // Draw the cat's beard
  svg.append("line")
    .attr("x1", 170)
    .attr("y1", 185)
    .attr("x2", 155)
    .attr("y2", 190)
    .attr("stroke", "black")

    svg.append("line")
    .attr("x1", 170)
    .attr("y1", 200)
    .attr("x2", 155)
    .attr("y2", 195)
    .attr("stroke", "black")

    svg.append("line")
    .attr("x1", 128)
    .attr("y1", 190)
    .attr("x2", 110)
    .attr("y2", 185)
    .attr("stroke", "black")

    svg.append("line")
    .attr("x1", 128)
    .attr("y1", 195)
    .attr("x2", 110)
    .attr("y2", 200)
    .attr("stroke", "black")

  // Draw a cloud from engine with circles
  for (let i = 0; i < 3; i++) {
    const circle = svg.append("circle")
        .attr("cx",   50 + i * 20) // Adjust the spacing between circles
        .attr("cy", 150 - i * 20)
        .attr("r", 15)
        .attr("fill", "white")
        .attr("class", "cloud")
        .attr("stroke","black")
        .attr("class","engine-exhaust")

}

  for (let i = 0; i < 3; i++) {
    const circle = svg.append("circle")
        .attr("cx",   30 + i * 20) // Adjust the spacing between circles
        .attr("cy", 180 - i * 20)
        .attr("r", 10)
        .attr("fill", "white")
        .attr("class", "cloud")
        .attr("stroke","black")
        .attr("class","engine-exhaust")

}
    // Draw passengers
    // 1st passenger - Draw fish 
  const fishGroup = svg.append("g")
    .attr("transform", "translate(290, 185)")
    .call(d3.drag()  
        .on("start", dragStarted)
        .on("drag", dragging)
        .on("end", dragEnded)
    );

  // Fish body
  fishGroup.append("ellipse")
    .attr("cx", 0)
    .attr("cy", 0)
    .attr("rx", 20)
    .attr("ry", 10)
    .attr("fill", "blue");
   

  // Fish tail
  const tailPoints = "20,0 30,20 30,-20";
  fishGroup.append("polygon")
    .attr("points", tailPoints)
    .attr("fill", "blue");

  // Fish eye
  fishGroup.append("circle")
    .attr("cx", -10)
    .attr("cy", 0)
    .attr("r", 3)
    .attr("fill", "black");

    // 2nd passenger - Draw Fox 
  const foxGroup = svg.append("g")
    .attr("transform", "translate(340, 185)")
    .call(d3.drag()  
        .on("start", dragStarted)
        .on("drag", dragging)
        .on("end", dragEnded)
    );
 
    // Fox face
    foxGroup.append("polygon")
      .attr("points", "20,-10 80,-10 50,30")
      .attr("fill", "Magenta")

    // Draw Fox ears (circles)
    foxGroup.append("polygon")
      .attr("points", "20,-10 50,-10 35,-30")
      .attr("fill", "Magenta")

    foxGroup.append("polygon")
      .attr("points", "50,-10 80,-10 65,-30")
      .attr("fill", "Magenta")

    foxGroup.append("polygon")
      .attr("points", "26,-10 44,-10 35,-20")
      .attr("fill", "pink")

    foxGroup.append("polygon")
      .attr("points", "56,-10 74,-10 65,-20")
      .attr("fill", "pink")

  // Draw Fox eye (circles)
    foxGroup.append("circle")
      .attr("cx", 40)
      .attr("cy", 5)
      .attr("r", 3)
      .attr("fill", "white")

  foxGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", 5)
    .attr("r", 3)
    .attr("fill", "white")

    foxGroup.append("circle")
    .attr("cx", 40)
    .attr("cy", 5)
    .attr("r", 2)
    .attr("fill", "black")

    foxGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", 5)
    .attr("r", 2)
    .attr("fill", "black")

  // Draw Fox nose (triangle)
    foxGroup.append("polygon")
      .attr("points", "46,25 54,25 50,30")
      .attr("fill", "black")

    // Draw fox's beard
    foxGroup.append("line")
      .attr("x1", 30)
      .attr("y1", 25)
      .attr("x2", 44)
      .attr("y2", 20)
      .attr("stroke", "black")

    foxGroup.append("line")
      .attr("x1", 30)
      .attr("y1", 15)
      .attr("x2", 44)
      .attr("y2", 18)
      .attr("stroke", "black")

    foxGroup.append("line")
        .attr("x1", 55)
        .attr("y1", 18)
        .attr("x2", 69)
        .attr("y2", 15)
        .attr("stroke", "black")

    foxGroup.append("line")
        .attr("x1", 55)
        .attr("y1", 20)
        .attr("x2", 69)
        .attr("y2", 25)
        .attr("stroke", "black")


    // 3rd passenger - Draw mouse 
  const mouseGroup = svg.append("g")
    .attr("transform", "translate(460, 185)")
    .call(d3.drag()  
        .on("start", dragStarted)
        .on("drag", dragging)
        .on("end", dragEnded)
    );
 
    // Mouse face
  mouseGroup.append("polygon")
    .attr("points", "20,-10 80,-10 50,30")
    .attr("fill", "violet")

    // Draw Mouse ears (circles)
    mouseGroup.append("circle")
    .attr("cx", 20)
    .attr("cy", -10)
    .attr("r", 15)
    .attr("fill", "violet")

    mouseGroup.append("circle")
    .attr("cx", 80)
    .attr("cy", -10)
    .attr("r", 15)
    .attr("fill", "violet")

    mouseGroup.append("circle")
    .attr("cx", 20)
    .attr("cy", -10)
    .attr("r", 10)
    .attr("fill", "pink")

    mouseGroup.append("circle")
    .attr("cx", 80)
    .attr("cy", -10)
    .attr("r", 10)
    .attr("fill", "pink")

  // Draw Mouse eye (circles)
   mouseGroup.append("circle")
    .attr("cx", 40)
    .attr("cy", 5)
    .attr("r", 3)
    .attr("fill", "white")

    mouseGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", 5)
    .attr("r", 3)
    .attr("fill", "white")

    mouseGroup.append("circle")
    .attr("cx", 40)
    .attr("cy", 5)
    .attr("r", 2)
    .attr("fill", "black")

    mouseGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", 5)
    .attr("r", 2)
    .attr("fill", "black")

  // Draw Mouse nose (triangle)
  mouseGroup.append("polygon")
    .attr("points", "46,25 54,25 50,30")
    .attr("fill", "black")

  // Draw Mouse beard
  mouseGroup.append("line")
    .attr("x1", 30)
    .attr("y1", 25)
    .attr("x2", 44)
    .attr("y2", 20)
    .attr("stroke", "black")

  mouseGroup.append("line")
    .attr("x1", 30)
    .attr("y1", 15)
    .attr("x2", 44)
    .attr("y2", 18)
    .attr("stroke", "black")

    mouseGroup.append("line")
    .attr("x1", 55)
    .attr("y1", 18)
    .attr("x2", 69)
    .attr("y2", 15)
    .attr("stroke", "black")

    mouseGroup.append("line")
    .attr("x1", 55)
    .attr("y1", 20)
    .attr("x2", 69)
    .attr("y2", 25)
    .attr("stroke", "black")

    // last passenger - Draw bear 
  const bearGroup = svg.append("g")
    .attr("transform", "translate(560, 185)")
    .call(d3.drag()  
        .on("start", dragStarted)
        .on("drag", dragging)
        .on("end", dragEnded)
    );
 

    // Draw bear face (circles)
    bearGroup.append("circle")
    .attr("cx", 50)
    .attr("cy", 0)
    .attr("r", 25)
    .attr("fill", "brown")

    bearGroup.append("circle")
    .attr("cx", 50)
    .attr("cy", 10)
    .attr("r", 15)
    .attr("fill", "olive")

    // Draw bear's ears
    bearGroup.append("circle")
    .attr("cx", 30)
    .attr("cy", -25)
    .attr("r", 10)
    .attr("fill", "brown")

    
    bearGroup.append("circle")
    .attr("cx", 70)
    .attr("cy", -25)
    .attr("r", 10)
    .attr("fill", "brown")

    bearGroup.append("circle")
    .attr("cx", 30)
    .attr("cy", -25)
    .attr("r", 5)
    .attr("fill", "pink")

    
    bearGroup.append("circle")
    .attr("cx", 70)
    .attr("cy", -25)
    .attr("r", 5)
    .attr("fill", "pink")

    // Draw bear's eyes
    bearGroup.append("circle")
    .attr("cx", 40)
    .attr("cy", -5)
    .attr("r", 3)
    .attr("fill", "white")

    bearGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", -5)
    .attr("r", 3)
    .attr("fill", "white")

    bearGroup.append("circle")
    .attr("cx", 40)
    .attr("cy", -5)
    .attr("r", 2)
    .attr("fill", "black")

    bearGroup.append("circle")
    .attr("cx", 60)
    .attr("cy", -5)
    .attr("r", 2)
    .attr("fill", "black")
   
     // Draw bear's nose
     bearGroup.append("circle")
    .attr("cx", 50)
    .attr("cy", 5)
    .attr("r", 2)
    .attr("fill", "black")
    // Draw's bear's mouth
    bearGroup.append("path")
    .attr("d", "M40,15 Q50,20 60,15")
    .attr("fill", "black");


    function dragStarted(event, d) {
        d3.select(this).raise().classed("active", true);
    }

    function dragging(event, d) {
        d3.select(this)
            .attr("transform", `translate(${event.x},${event.y})`);
    }

    function dragEnded(event, d) {
        d3.select(this).classed("active", false);
    }


// Append the SVG element.
container.append(svg.node());

</script>
